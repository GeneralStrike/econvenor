{% extends "app_base.html" %}
{% load setclass %}

{% block content %}


<div class="container-fluid">
  <div class="row">

 
    <div class="col-md-2 sidebar">
      <ul class="nav nav-sidebar">
        <li><a href="#meeting_details">Meeting details</a></li>
      </ul>
      <ul class="nav nav-sidebar">
        {% for item in items %}
          <li>
          <div>
            <a href="#id_{{ item.item_no}}-heading">{{ item.item_no}}. {{ item.heading }}</a>
            <div class="pull-right">
              <form action="" method="POST">
                {% csrf_token %}
                {% ifnotequal item.item_no 1 %}
                  <button type="submit" class="btn btn-default btn-xs" name="up_button" value="move_up_{{ item.item_no}}">
                    <span class="glyphicon glyphicon-circle-arrow-up"></button>
                {% endifnotequal %}
                {% ifnotequal item.item_no item_count %}
                  <button type="submit" class="btn btn-default btn-xs" name="down_button" value="move_down_{{ item.item_no}}">
                  <span class="glyphicon glyphicon-circle-arrow-down"></button>
                {% endifnotequal %}
                <button type="submit" class="btn btn-default btn-xs" name="delete_button" value="delete_item_{{ item.item_no}}">
                  <span class="glyphicon glyphicon-remove"></button>
              </form>
            </div><!-- ./pull-right -->
          </div>
          </li>
        {% endfor %}
      </ul>
      <form action="" method="POST">
        {% csrf_token %}
        <ul class="nav nav-sidebar">
          <li><button type="submit" class="btn btn-default" name="add_item_button" value="add_item" data-toggle="button">Add item</button></li>
        </ul>
      </form>
    </div><!-- /.col-md-2 -->


    <div class="col-md-8 col-md-offset-1 main" id="meeting_details">
      
      <h1>{{ page_heading }}</h1>
      
      <h1><small>Meeting details</small></h1>
      <div class="well">
      <form action="" method="POST">
        {% csrf_token %}
        {% for hidden in existing_data_forms.hidden_fields %}
          <div class="form-group">
            {{ hidden }}
          </div>
        {% endfor %}	
        {% for field in existing_data_forms.visible_fields %}
          <div>
            {{ field.label_tag }}
            {% ifequal field.label "Date" %}
              <br>
              {{ field }}
            {% else %}
              {{ field|setclass:"form-control" }}
            {% endifequal %}
          </div>
          <br>
        {% endfor %}
        <button type="submit" class="btn btn-primary" name="save_meeting_details_button" value="save_meeting_details" data-toggle="button">Save meeting details</button>
        <button type="submit" class="btn btn-default" name="cancel_meeting_details_button" value="cancel_meeting_details" data-toggle="button">Discard changes</button>
        <button type="submit" class="btn btn-danger" name="delete_meeting_button" value="delete_meeting" data-toggle="button">Delete meeting</button>
      </form>
      </div>


      <form action="" method="POST">
        {% csrf_token %}
        {% for item in item_formlist %}
          <div class="panel panel-primary">
            <div class="panel-heading">
              {{ item.heading|setclass:"form-control" }}
            </div>
          <div class="panel-body">
            {{ item.time_limit.label_tag }}{{ item.time_limit|setclass:"form-control" }}		
            {{ item.explainer.label_tag }}{{ item.explainer|setclass:"form-control" }}
            {{ item.background.label_tag }}{{ item.background|setclass:"form-control" }}    
          </div>
          {% for hidden in item.hidden_fields %}
            <div class="form-group">
              {{ hidden }}
            </div>
          {% endfor %}
          </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary" name="save_items_button" value="save_items" data-toggle="button">Save items</button>
      </form>
      
      
      <div class="well">
        {% ifequal editable_section 'none' %}
          <a href={% url 'minutes-edit' meeting_id %}><button type="button" class="btn btn-primary" data-toggle="button">Create minutes from this agenda</button></a>
          <a href={% url 'agenda-print' meeting_id %}><button type="button" class="btn btn-primary" data-toggle="button">Create a PDF of this agenda</button></a>
          <a href={% url 'agenda-distribute' meeting_id %}><button type="button" class="btn btn-primary" data-toggle="button">Distribute this agenda</button></a>
        {% endifequal %}
      </div>
      
      <div class="spacer">
      </div>      

	
	
    </div><!-- /.col-md-8 -->
  </div><!-- ./row>
</div><!-- ./container -->


{% endblock %}

{% comment %}

		<div class="well">
			{% for item in items %}
				<div class="panel panel-primary">
					<div class="panel-heading">
						<strong>{{ item.heading }}</strong>
						<p class="pull-right">{{ item.time_limit}} minutes</p>
					</div>
					{% ifnotequal item.background '' %}
						<div class="panel-body">
							{{ item.background|linebreaks }}
						</div>
					{% endifnotequal %}
				</div>
			{% endfor %}
			{% ifequal editable_section 'none' %}
				<form action="" method="POST">
					{% csrf_token %}
					<button type="submit" class="btn btn-default" name="edit_items_button" value="edit_items" data-toggle="button">Edit items</button>
					<button type="submit" class="btn btn-default" name="add_item_button" value="add_item" data-toggle="button">Add an item</button>
				</form>
			{% endifequal %}
		</div>
		
	{% endifequal %}


</div>
      </div>
    </div>

{# TASKS REVIEW #}
<h1><small>Task review</small></h1>
<div class="well">
	{# List of incomplete tasks #}
	<h2><small>Tasks outstanding</small></h2>
	<div class="panel panel-primary">
		<table class="table">
			<thead>
				<tr>
					{% for heading in task_list_headings %}
						<th>{{ heading }}</th>
					{% endfor%}
				</tr>
			</thead>
			<tbody> 
				{% for task in incomplete_task_list %}
					<tr>
						<td>{{ task.description }}</td>
						<td>{{ task.participant }}</td>
						<td>{{ task.deadline }}</td>
					</tr>
				{% empty %}
					<tr>
						<td>None</td>
					</tr>
				{% endfor%}
			</tbody>
		</table>
	</div>
	{# List of tasks completed since last meeting #}
	<h2><small>Tasks completed since last meeting</small></h2>
	<div class="panel panel-primary">
		<table class="table">
			<thead>
				<tr>
					{% for heading in task_list_headings %}
						<th>{{ heading }}</th>
					{% endfor%}
				</tr>
			</thead>
			<tbody> 
				{% for task in completed_task_list %}
					<tr>
						<td>{{ task.description }}</td>
						<td>{{ task.participant }}</td>
						<td>{{ task.deadline }}</td>
					</tr>
				{% empty %}
				<tr>
					<td>None</td>
				</tr>
				
				{% endfor%}
			</tbody>
		</table>
	</div>
	{% ifequal editable_section 'none' %}
		<a href={% url 'task-list' %}><button type="button" class="btn btn-default" data-toggle="button">Edit tasks</button></a>
	{% endifequal %}
</div>

{% endcomment %}


