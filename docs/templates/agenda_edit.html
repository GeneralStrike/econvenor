{% extends "app_base.html" %}
{% load setclass %}

{% block content %}


<div class="row">

  <div class="col-sm-3 sidebar">
    <h2>Agenda navigation</h2>
    <ul class="nav nav-sidebar">
      <li><a href="#meeting_details">Meeting details</a></li>
    </ul>
    
    <div id="ajax-sidebar">
    </div>
           
    <ul class="nav nav-sidebar">
      <li><a href="#tasks">Appendix 1 - Tasks</a></li>
    </ul>
    <ul class="nav nav-sidebar">
      <li><button type="button" class="btn btn-primary jsbutton" id="save_button">Save all</button></li>
      <li><button type="button" class="btn btn-primary jsbutton" id="add_button">Add item</button></li>
    </ul>
    <ul class="nav nav-sidebar"> 
        <li><a href={% url 'minutes-edit' meeting_id %}><button type="button" class="btn btn-primary saveonpress" data-toggle="button">Create minutes from this agenda</button></a></li>
        <li><a href={% url 'agenda-print' meeting_id %}><button type="button" class="btn btn-primary saveonpress" data-toggle="button">Create a PDF of this agenda</button></a></li>
        <li><a href={% url 'agenda-distribute' meeting_id %}><button type="button" class="btn btn-primary saveonpress" data-toggle="button">Distribute this agenda</button></a></li>
      </ul>
  </div><!-- /.col-sm-3 -->

  <div class="col-sm-7 col-sm-offset-4 main">

    <div class="top-spacer">
    </div>
    
    <h1>{{ page_heading }}</h1>

    <div class="well" id="meeting_details">
      <h1><small>Meeting details</small></h1>
      {% ifequal focus 'meeting' %}
      <form action="" method="POST">
        {% csrf_token %}
        {% for hidden in existing_data_forms.hidden_fields %}
          <div class="form-group">
            {{ hidden }}
          </div>
        {% endfor %}	
        {% for field in existing_data_forms.visible_fields %}
          <div>
            {{ field.label_tag }}
            {% ifequal field.label "Date" %}
              <br>
              {{ field }}
            {% else %}
              {{ field|setclass:"form-control" }}
            {% endifequal %}
          </div>
          <br>
        {% endfor %}
        <button type="submit" class="btn btn-primary" name="save_meeting_details_button" value="save_meeting_details" data-toggle="button">Save meeting details</button>
        <button type="submit" class="btn btn-default" name="cancel_meeting_details_button" value="cancel_meeting_details" data-toggle="button">Discard changes</button>
        <button type="submit" class="btn btn-danger" name="delete_meeting_button" value="delete_meeting" data-toggle="button">Delete meeting</button>
      </form>
      {% else %}
      
        <div class="panel panel-primary">
	  	  <table class="table">
	        <thead>
			  <tr>
			    <th>{{ meeting.description }} of {{ account.group_name }}</th>
			    <th></th>
			  </tr>
		    </thead>
		    <tbody> 
			  <tr>
			    <td><strong>Date</strong></td>
			    <td>{{ meeting.date }}</td>
			  </tr>
			  <tr>
			    <td><strong>Start time</strong></td>
			    <td>{{ meeting.start_time }}</td>
			  </tr>
			  <tr>
			    <td><strong>End time</strong></td>
			    <td>{{ meeting_end_time }}</td>
			  </tr>
			  <tr>
			    <td><strong>Scheduled duration</strong></td>
			    <td>{{ meeting_duration }}</td>
			  </tr>
			  <tr>
			    <td><strong>Location</strong></td>
			    <td>{{ meeting.location|linebreaks }}</td>
			  </tr>
			  <tr>
			    <td><strong>Notes</strong></td>
			    <td>{{ meeting.notes|linebreaks }}</td>
			  </tr>
		    </tbody>
		  </table>
	    </div><!-- ./panel -->
   	    <form action="" method="POST">
   	      {% csrf_token %}
	      <button type="submit" class="btn btn-default" name="edit_meeting_details_button" value="edit_meeting_details" data-toggle="button">Edit meeting details</button>
	    </form>
      {% endifequal %}
      </div><!-- ./well -->

    <div id="ajax-items">
    </div>
      



<div class="well" id="tasks">
  <h1><small>Appendix 1 - Tasks</small></h1>
    <h2><small>Tasks outstanding</small></h2>
	  <div class="panel panel-primary">
		<table class="table">
		  <thead>
			<tr>
			  {% for heading in task_list_headings %}
				<th>{{ heading }}</th>
			  {% endfor%}
			</tr>
		  </thead>
		  <tbody> 
			{% for task in incomplete_task_list %}
			  <tr>
				<td>{{ task.description }}</td>
				<td>{{ task.participant }}</td>
				<td>{{ task.deadline }}</td>
			  </tr>
			{% empty %}
			  <tr>
			    <td>None</td>
			  </tr>
			{% endfor%}
		  </tbody>
		</table>
	</div>
	{# List of tasks completed since last meeting #}
	<h2><small>Tasks completed since last meeting</small></h2>
	<div class="panel panel-primary">
		<table class="table">
			<thead>
				<tr>
					{% for heading in task_list_headings %}
						<th>{{ heading }}</th>
					{% endfor%}
				</tr>
			</thead>
			<tbody> 
				{% for task in completed_task_list %}
					<tr>
						<td>{{ task.description }}</td>
						<td>{{ task.participant }}</td>
						<td>{{ task.deadline }}</td>
					</tr>
				{% empty %}
				<tr>
					<td>None</td>
				</tr>
				
				{% endfor%}
			</tbody>
		</table>
	</div>
</div>
	
    <div class="bottom-spacer">
    </div>  

		
    </div><!-- /.col-sm-7 -->
  </div><!-- ./row>





{% endblock %}


