{% load setclass %}

<form class="savebyjs" action="" method="POST">
  {% csrf_token %}
  
  {% for item in item_formlist %}

    
    <div class="panel panel-primary" id="id_{{ item.item_no.value}}-title">
      
      <div class="panel-heading">
        <strong>Item&nbsp;{{ item.item_no.value }}.&nbsp;
                {{ item.title.value }}
                {{ item.item.no }}
        </strong>
        <div class="pull-right">
          {{ item.time_limit.value }}&nbsp;minutes		
        </div>
      </div>
      
      <div class="panel-body">
      
        <div class="form-group">
          <div class="well well-sm">
            To be explained by&nbsp;{{ item.explainer.value }}
            <br/>
            <h1> Print: {{ item.id.value }} </h1>
            <h1> {{ item.id }} </h1>
            <h1> {{ item.id.label_tag }} </h1>
          </div>
        </div>
        
        <div class="form-group">
          {{ item.background.label_tag }}
          <div class="well">
            {{ item.background.value }}
          </div>
        </div>
        
        <div class="form-group">
          {{ item.minute_notes.label_tag }}
          {{ item.minute_notes|setclass:"form-control" }}
        </div>
        
        {% for hidden in item.hidden_fields %}
          <div class="form-group">
            {{ hidden }}
          </div>
        {% endfor %}


        <p><strong>Decisions:</strong></p>
        
        <div class="panel panel-default">
          {% for decision in decisions %}
            {% ifequal decision.item.value item.id.value %}
              <div class="form-group">
                {{ decision.description|setclass:"form-control" }}
                {{ decision.DELETE.label_tag }}
                {{ decision.DELETE|setclass:"form-control"}}
                {{ decision.id|setclass:"form-control" }}
                {{ decision.meeting|setclass:"form-control" }}
                {{ decision.item|setclass:"form-control" }}
                {{ decision.owner|setclass:"form-control" }}
                
              </div>
            {% endifequal %}
          {% endfor %}

          <button type="submit" class="btn btn-default" 
                  name="add_decision_button" 
                  value="add_decision_button_{{ item.id.value }}" 
                  data-toggle="button">
            Add a decision to this item
          </button>
          
        </div>


        <p><strong>Tasks:</strong></p>
        
        <div class="panel panel-default">
          {% for task in tasks %}
            {% ifequal task.item.value item.id.value %}
              <div class="form-inline" role="form">
                <div class="form-group">
                  {{ task.description|setclass:"form-control" }}
                  {{ task.participant|setclass:"form-control" }}
                  {{ task.deadline|setclass:"form-control" }}
                  {{ task.DELETE.label_tag }}
                  {{ task.DELETE|setclass:"form-control"}}
                  {{ task.status|setclass:"form-control" }}
                  {{ task.id|setclass:"form-control" }}
                  {{ task.meeting|setclass:"form-control" }}
                  {{ task.owner|setclass:"form-control" }}
                  {{ task.item|setclass:"form-control" }}
                </div>
              </div>
            {% endifequal %}
          {% endfor %}

          <button type="submit" class="btn btn-default"
                  name="add_task_button" 
                  value="add_task_button_{{ task.id.value }}"
                  data-toggle="button">
            Add a task to this item
          </button>
        </div>						

      </div>
    </div>
  {% endfor %}
</form>
