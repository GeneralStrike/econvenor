{% extends "app_base.html" %}
{% load setclass %}
{% load staticfiles %}

{% block content %}

<div class="page-header">
  <h1>New meeting</h1>
</div>

<div class="well">
  <div class="span10"> 
    <form id="addmeetingform" action="" method="POST">
    {% csrf_token %}
      {{ meeting_form.as_p }}
      <button type="submit" class="btn btn-primary">
        Save meeting details
      </button>
      <a href={% url 'meeting-list' %}>
        <button type="button" class="btn btn-default">
          Cancel
        </button>
      </a>
    </form>
  </div>
</div>

{% endblock content %}

{% block extrajs %}

<script src="{% static 'js/jquery.timepicker-1.3.5.min.js' %}"></script>

<script>

  $(function() {
  
    jQuery.validator.addMethod("timeCheck", function(value, element) {
      return this.optional(element) || /^([0-1]?[0-9]|[2][0-3]):([0-5][0-9])$/.test(value);
    },
    "Please select a time from the options available");

    jQuery.validator.addMethod("meetingNumberCheck", function(value, element) {
      return this.optional(element) || /^[a-zA-Z0-9\-\_\/]+$/.test(value);
    },
    "The meeting number can only contain letters, numbers and these characters: '-', '_', '/'");

    $("#addmeetingform").validate({
      rules: {
        meeting_no: {
          required: true,
          meetingNumberCheck: true,
        },
        meeting_type: "required",
        date_scheduled: {
          required: true,
          date: true,
        },
        start_time_scheduled: {
          required: true,
          timeCheck: true,
        },
        meeting_status: "required",
      },
      messages: {
        meeting_no: {
          required: "Please enter a number or code for this meeting",
        },
        meeting_type: "Please select the type of meeting that this is",
        date_scheduled: {
          required: "Please select a date for the meeting",
          date: "Please select a valid date from the calendar",
        },
        start_time_scheduled: {
          required: "Please select the meeting's start time",        
        },
        meeting_status: "Please select the current status of the meeting",
      },
    });
    
  })

</script>


{% endblock extrajs %}
